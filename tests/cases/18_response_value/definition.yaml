openapi: "3.0.3" # Use older openAPI spec version due to a bug in Zally: https://github.com/zalando/zally/issues/1230
info:
  title: "Response Values"
  description: |
    Ensure that we generate appropriate resposne values every time.
  version: "0.1.0"


paths:
  "/natural-persons":
    post:
      description: |
        Create a new natural person identification.

        An identification is a snapshot in time of the data available to identify a person.
      operationId: createNaturalPersonIdentification
      requestBody:
        required: true
        content:
          "application/json":
            schema:
              $ref: "#/components/schemas/NaturalPersonIdentification"
      responses:
        '201':
          description: identification for natural person was created
          headers:
            Location:
              $ref: "#/components/headers/Location"
          content:
            "application/json":
              schema:
                $ref: "#/components/schemas/NaturalPersonIdentification"
        default:
          $ref: "#/components/responses/Default"

components:
  schemas:
    IdentificationId:
      description: an identifier for this particular identification process
      type: string
      format: uuid
      x-newtype:
        pub: true

    PersonId:
      description: the FINVIA PersonId for this individual
      type: string
      format: uuid
      x-newtype:
        pub: true

    AdditionalInformation:
      type: array
      items:
        type: string

    NaturalPersonIdentification:
      type: object
      properties:
        id:
          readOnly: true
          allOf:
            - $ref: "#/components/schemas/IdentificationId"
        person_id:
          $ref: "#/components/schemas/PersonId"

      required:
        - person-id


  responses:
    Default:
      description: an error occurred; see status code and problem object for more information
      content:
        "application/problem+json":
          schema:
            "$ref": "https://opensource.zalando.com/restful-api-guidelines/models/problem-1.0.1.yaml#/Problem"

  headers:
    Location:
      schema:
        description: |
          The path at which the new resource can be found.

          This is absolute in that it starts with a `/`, and describes the complete path.
          It is relative in that it does not name the server, transport method, port, or other URL-specific data.
        type: string
        format: path
